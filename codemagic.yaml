# Based on https://codemagic.io/app/5fc5305a253cd4a4babce97d/settings

workflows:
  development:
    name: development
    max_build_duration: 25
    environment:
      vars:
        APP_STORE_CONNECT_ISSUER_ID: a3c260c0-e7e5-4f83-84f9-e00caa3b382f
        APP_STORE_CONNECT_KEY_IDENTIFIER: 298C628PBL
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYweVpLdExKTWJnR08wSk9nbEpLU0JOb2dla3lXS01DTUhrcEw1Q0VTdjI5NF9Wd0llN3czR01pbjk5REJkS3hUZjNFWDRGX2lBSDNIZllnVWNYb1RfS1JYNVRVSkhhTGRWdUx0c2Zkc0tJeW0wNTdQNFNTZlM3NnFBUlV6QTQwXzl5WUVjWnNYSVNZLXNJb3dhLUJWNGlrWDVWYTNDdEV2SloyU2RaVkNQaTZVazhUMl9vWEtFUDFSVEo0RzJjNmdyaFk5dHo5d0dqdmhnenAwM21OTlZ1ejZaZ2kyT3dVUGJOaGI2Z0F5Slg5YThYRTdQNFZfRmhzb3VLcWtzbHpMTlhSTlo0OTJuWXc1a3JqcjJnaGoyN3BWSGF2eHpPdEk4ZksyWDVJNThLRDVhYzZBQmpwc0Z6ekNzUHZUTU04ckoyZlFTQVpMazlNX3hSQ2p3bFJaZ281MDQxRXZFSjQwTUwyUkFfS2RnM0M1TzBUamtuZ3JldmJYcTBtNzRJRHNBYlFHX1c3UjhlcHM0dWRtSy1XdXZCMkhHd2NDYmM0YlR3MWstQXdPNjNuSmgyQT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYweVpLYkU2dVphUEt5Mk05MkNhQ3dGVnlXOFRvdUZYX21Dbnhnemg2ZktyamUtOEc5UXoxMmd2ci1GU09ZNF9nWjVLQkJTeVpaeGVyMWVGNGE5bW5PZkhqTVlhMHlmc1pDc1dXTDNhdlMtUDZ0ZUlhTGJaR1dpcE5JVml4dnZxVEI0STlkXzV4ZF9oY094Q01CeExaMmNNOUJ1ZU5FZm1kUG5rVmlXcDh3ZFpMV2tZYm9aS1cxVzNDaEIyY28wa0JGV3M2MnhuYU9TdzF1WlZ1WUJmTXdyeTdhLWpBdF9yTUNqcVZnRkxQZFdtSnlDT3l0bUgwZWF5Z0U5Xy1JcmRyNTV4bnNva05ORHMtTzExa3duRWFKVTlPN09HZGF3LWxHb241WUhMZGNtQW9SOXVBRm4tQkFWc2ppMEtBZ3V3M29UbVprc0prS3NfcTlISWwtc05OWXBwQ29ha0MzRk4yWFY5dF9SUTBrZHFRTHU3aGJ2bGtCM2hpOTA1dTBRV3BzUl95V3RSU1o2Sm5zbmplZ0hTTEc4bHFadUlzX0NINTlSeXZFT2szeV82Ry1kLVg4SU1SZF9qZDFSekRNWDlWMThKVjRLcXZfLTBEYVZ0QjZWQXlGbzJNbHpNV0M4bDNNMEJrZUZQQm9PNndfUUwtYmNIRHI2VFpRQzhESjFXVlJ2TDBacnlubmJVZ3BhTDJydktRWG83VS1JT2lWSGIzU0JjVmtyNE13ZXRNRVRPRUVHcDRVcVRSa3JKZDZaa3Q5UHE1VzNtaGRJR1VrX0NYY3YzYTVab1FGcnE3RkxWenRhRE40Qmw2ZVJ1WVFEMTV3aF8wSVROaFVNT3VNN09pcEVPTkVyYS1fbm1LSnRRODB3OU9jR2FzZG1FSnJvLWg5X09YamE2QmxKNnlkcjdVcU40WDZFc2NmNUxrWWNac1dYQXVBZGFBMG9aNXlnVU1McWJBZFk4blZvWThGZ1VzZVBjUXRnWTIwaml3VnplZVpKRjd4bXQ5cW9adkFTUzMzOHBDUEZpcE5LSEVvSXNKTnlnZjJuSXJ4V2c1Y1otZkhEYWQwMnUzYzUtUjlGWl80S28xcGZsWjlnU1dfME9GczlSMUtvSDgxZV9aMWtUREVnUEtCbTlpaVlYVHZtU0o2R3o5cFFCN0QzWjkwWDZXNTJoT0NMaDRHUXk0aGlHdWpJRldmTklRdHlGRS1DVnJxdzFXS3g4Um5sN1FnY2t1VS1mZjBVZkl6RmNtajU0blluMF9QTFFzS0QtaXVramRiYWc5UC1NcS1sZUQwbmw2QjFxT0h4WkRQVVIyMkdXM1pLc1U2XzI3UEROZXB5cGpDNDNqcjRpaWhrV2dZY2JVZnloTlRrRnRrbTJDWjlkVUhTV1pVNG1qNGc3cWowR0ZIUzRSZFZUQ3R3ekRVMFJ3QldNamZnVmp0NGlfQndiR3FoakdzZEVfclFBX25XWGtsdGwwV2Y1WEpHNC1hVTJTTHJkdzBndF9ScC1yRGZuT0tNdUZSZHl5REVVOHZNVlFMamZQSzNGbXYwaVRFU0hEczNuUldnYmtzWWZUX0F5WF9HakxMUlBQQkJPYnFQZTFadmVsSjEyQ1BBbkhlLUxtT0ZBZ3pPN1lRektNaERvRUFKTDBfTGxvTGU1ZFpKdjlxOXhMdVFuYl80Q1pkd2tNRk5HSXQ5MExheFdxZXltTS1NXzNtYXZIbWtCRW9ZWXZHWExmbUx5TVEwSFdxTFJrMDRTRjdBWjdndkJyMHM4ajJPa0NZQTJuMi1wcDhpUXR4TXMwaGVuVm5NOWw2V1ZYSEU3ZERObElpRTlILU16SWRvZ1dGaHpfMFMwcTRIVTUtUnJNT0ZLeG9TT1NCM01JcHZqSjU0THE1WVBIb0Z0MkRSTjV6M0RndUgybjNIb1hvbGdhQ3pzYXE4Tk9YQlE0QTdGWWZVT2pwOVRCazZaUnNvclVnaERzMjluNmtUQWloRkczSzU2MF9FN2ZJbWYwalJCaGp0NnZDc1FTdW5QVnhDR3E1NldVZXlzby13QWlza3A5ZmJ5RlRIQUhENGlkTDdmVmFVWHU1RXlEZE1ULUNLal9Eb0dHQ1pEbjRuNzRnWV9fQ3VjZjNzRGpnQkNuR3BhdzJlTml2MVRtSTBhb1dybklTbG5lcndHY3RXMERWX2pTUTlyR292NmtRN3FKNmI0WWJwLUhoZDI3RE91VXhlcjVjdDN3ZkVzSlpMMnBZUjJMOWU1OXp4TGZDSDV3ZFVDTFdGX3lFVEI5VU5WVVZSdEF5VllEakpZVllUUlk0MTFXTlZPX1BLdWU5YXlFdE1YR2VKcmVZenVxM1ZOM1VNTUFLTFhuNUFtbjVycTRweWNoM3pobHJ5YXhCVWJJMEtGcVNCcVFLYWdIYzlZcUxnZDJSdHFvZVpMdU9XYnFFN0VLX0xGeHNnZTBMUkkwbVVyT3dzVkV1WEpjUzJKMV9GaEc4dEJDcnNBR01XaHgxX0duOTR3ZlhNT1N4Z1YyM1BuQkc5aDZkVnVwVmc0NkhJOXU0bUZ3RHU1N09SZF9WQV9rdzQ5WXNCbllZVXN1Y3I0YnZwcU1lblBUeGhFakxVVFFYdDlMZEZscFlIU3pqeDd6SlN0NFI3SXBkNlQxdURrSXVhUVBjYlFqTlZ2amxEVEs5ZW1vOFJFbDA2eUE1d0w1c3N1ai1QbGE0NUhUTUVPMWVmTXZxc19DUHJzRk1Zd25lTTFRU3ptMjR2R1BQd0VyWkNsNE0yOW9mMTFSUjNvYXhxS0U2Z19QNWlDbGJvZ0p0YlJkYXE3bXd6MUNxUVhvczRlOUhjWlN1djJtaFRBVmNKUlBjZ1RibWtiYWE3TkE4M3ctc1hRc0xDWlI5bW1XTmFhX2NjaGx1U1N0U1dmTlN2VHB1bE1NUHVPM0tpakkwOHZXblVUdDhxcUV3Q0s0eHhNMmNvLU9ld1FmTjRSU1Q5aFpqOUVFMjRYS0VTamFHdWtybS1SVDU4UDh2MzFFamRwM29jN2h4a1FOMWtpZ2ZHMU9EZWh6QlJsSk9BS0ZNUW9BZEJTdGx4Vlh3SGFl)
      flutter: v3.3.4
      xcode: latest
      cocoapods: default
    cache:
      cache_paths:
        - $HOME/.gradle/caches
        - $FLUTTER_ROOT/.pub-cache
        - $HOME/Library/Caches/CocoaPods
    triggering:
      events:
        - push
      branch_patterns:
        - pattern: '*'
          include: true
          source: true
        - pattern: 'master'
          include: false
          source: true
    scripts:
      - |
        # set up debug keystore
        rm -f ~/.android/debug.keystore
        keytool -genkeypair \
          -alias androiddebugkey \
          -keypass android \
          -keystore ~/.android/debug.keystore \
          -storepass android \
          -dname 'CN=Android Debug,O=Android,C=US' \
          -keyalg 'RSA' \
          -keysize 2048 \
          -validity 10000
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - cd . && flutter packages pub get
      - cd . && flutter pub global activate intl_utils
      - cd . && flutter pub global run intl_utils:generate
      - cd . && flutter analyze
      - cd . && flutter test
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "$(xcode-project detect-bundle-id)"
        --type IOS_APP_STORE --create
      - keychain add-certificates
      - cd . && flutter build ios --debug --no-codesign --build-number=$PROJECT_BUILD_NUMBER
      - xcode-project use-profiles
      - cd . && xcode-project build-ipa --workspace "ios/Runner.xcworkspace" --scheme
        "Runner"
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - kristian@cavatina.no
        notify:
          success: false
          failure: true
      app_store_connect:
        api_key: $APP_STORE_CONNECT_PRIVATE_KEY
        key_id: 298C628PBL
        issuer_id: a3c260c0-e7e5-4f83-84f9-e00caa3b382f
        submit_to_testflight: true

  deploy-master:
    name: deploy-master
    max_build_duration: 35
    environment:
      vars:
        FCI_KEYSTORE_PATH: /tmp/keystore.keystore
        FCI_KEYSTORE: Encrypted(Z0FBQUFBQmYweVpLeDdfYl9vMTU5TzhlQkNsM0FzUi1waGsxTTJRQU51VkdYMTZQenlVMlllTnlwbTFtQnZFLUR1cXJpQVpFZ1dWdVJaMm1wMFNtQjNoZUtIVlJ0Z1piM19UOVZtNGJYQkJWbV9aRUNyODlJanZmQnlJel9ZQTFtbkVneW10Rno3MTNudkxsNi0zVktkd1AzSjgzVkxESmtwb0FfZDhWaXBldjgyNVY4cW93QW9vckFTeXd3RnR1UHVBd2Mwai03RkJDajlaOFQ4eUFnamQ4dVVkQkYtbEFXUDNDYXFtRzk4QTZ1eWNYWWFsWjVQWUNja1lPa2pTQXpSLVk2bDlKUnMyZkFCQzk2TkVwblkxampwMlp3d1dXVXZYN0h1TndnQTdrYl9pOXAyZ2tnRHU0ZW92ZFlpSzRpclRZRWMteU9rcE1LZ05IVHNJM1BCeW05WUZXT29iajZiT0tqLUUzNnJEbnlLQkN5Sml5S1lqYXlMRm1KcTgzMUFiMnZWU0hFNlBiUlk5VE1UVUN2cUdhb0F0djlhdEJPYnYyTi1LeV8tNktBRHNma0M5bXA2TmNaR09uR1ExUXR0bXZIVXhXTGVfaXR5Vzh0LWhMRFdranBabUgyS1dzQUtPRGNGMEtGNC1IZ2RzQmhHbFFHQlh3THVQREN1OXdxWWVsZlF6UkhTRzB4QzJURk1FMnRvQzZzZGNuaGUtRmNvU0UtOTRORnQtQ29za2pDSld4MUdDQjQxcE51cXc2M0MwZ2hrRkh4WGFsTi1vNkt6NmxNOWFwRWcweUhWVXpPclItVGNhbHVkdmJ3UGxZRllQUHpZaHJHbnJoTnlRbmtYNmU4ajZXVEF6X2JxLVpndzJnUlVhcXJrTlVqM3lST2VrdzZHZkJLYUtWLVJYcnh0eHZBLWxLQ3NndDFCeGtlNjB2UGRkbDNfQjByZXkzTDRmYVFTaWU4cUVvWF8xNGlFTWJxRHFoZS15UUplU3g4djJYSE5XbDBzY1JwOVZ0SG9BVHd1TlVuRFl1dnd3Qm9mdkNoUFNmRUpUVHRrRzduTjUxX2x5TTBJNG9nTnN5MUNVNUxSZUY2N09hcjNEN3dTUExOMU9YMGJsbU5sc0txUHlaNzg1YVQ4aGlvY0poVnpWSURjTjcyODR3ZjRFZ2R5YjlPdmpZSUZtVE9aUnZxS2JPYTF2U2tvX1M3cy1VQlk5YmpBR0lQZ3QtYmxNaGdvZFNMaVh0OEFPUGZ0MVZZQnhYT0VHeDFteVNLeURvdVNoZm1nLXFXSHE5VHBIeXVkZ0Noa09TSGpaUE1GMnZudDVtNkprMXpaOTdUMHpYLWFxZDdaVTQ3MEV0NVlKVWRuLV90UnpuRTVfSkNsR2lkcG9iRk5PZmZzTG9MRmh2MEdMYy1XNnJKekNSZm1xVk9XR1c2dk82UHVWck9WYm9WSkRtQm5ubjNBdEhMWmFwbGE5T2N4OE9GT0U2R1NQa1loNXMtT0Z0X0hPeUdDS1ZlT0xkaTRXSGlZR0lfQmNfZ2FDZmNOcWtsV29UQU93dEdzdFBINVcwSFZIaGV4VmhVZl9KOWlQUkZzYXRtcTdfSjJLbmVXNGVoQW5EdU5jVEJvZEpJNGtCYmg1YnRLYm1RV3Z3eEtHYUZwOUNsMllIeThuU2JPTFE1M080ZEhFdVNYRkwyZjQyTm5LelBUbTF3YVZyNEg4YUdUTFpaSjFhc2wwVExHZWhMSHJ1RFB3OFVXbzJUZmhRUS1mRWEwLXFTWGhMN25iYndIc0FPNWtKS28tQXByY3RNUzBuSVZLVWxLT2RhOEYtUnVkeWQ0RHhGM3RveTRfT0xIR0NoNzhTMnZ6VzBiOEg1X2VfVGk2d1cyekc1WUwzYTAwN1U0R3ZoX0ZibVlPcXY0UTlHSnJxY190NkRGQl9sc1lhQ2o1RVRQeU9pLVJaRjV5bW5YU0NSMVFSNmw5TmxfS1lTa1JCOENCRW4xUzc1NG5hcFhWelo0cFNMbVZxbzJkLVNOeHFiZ3JaLWlGa29pMmt5MXlLTk5UekFKaEQtUVZGdnl4alBweTc0WF8zNWdTQTJtRlBmVXFNOHhBWWtTcUIxRk5UTzJkZmRsM0F4TzVKR0gtX01Fd1BuQURFMmNraXRjWTZybUtMbFFncDAwenFHc2VibUVnQjdDX0RhNVpSeEQxZlV5THZibEVleDBTNkk1WFpFdzB1UEZZRkRjRHVxQ3NmY1FnQy1FZndSal80WFZnV0g2T1BDa0tsMEJ5MC11WTBRS1ZmcHFXdTRvU2JDZk5IVHh5aHNTZk55QnQ2TlJYekIxWkt3YzVVXzVDQlNONVROdmMyZmg0UWFpVlFCV3JnUDRKRU1UcGphNkUwdkJDSXdjcFJvVy1jcXZZd0F1Tm45d3NjMnNHV0l4WTR3WnRtTFhPVFpwWmJjdXh4QVl5NTNaZlhBXzJYOGQ0VnF5UDhWaVBvbjJuOWdkY3NMZEZmMDgwd1hQcHV2WlUwWklCVEdKeUxGR1p1MDJTelA4Rk9QeWFhdUx2TEdvSXJyN0JfSFJ5cXdSQUwySzlSNF9VTWhvUjBtTTBKbDVMUFRkdjdpMG1TTlRZSVhqN2hndUpjaUVJdUpXOVZrd0l2Y2RpNXplTFRnQm5VSFNIRFpDaWFRSUJNLTYzWktrQ01TdE5sd0wyeUJFTXJqcXljeDRfdjB2ajZkeDZUaWp0cUxsamdGallUUWh5NTlfRzFkdkVCSEhZN0llcTVackhqMThDaV9ST2oyR0VyakRwR09ZNGxvektCemtRQ2pWbEZtOHVNNU03R2ZLS0hmZkdBVW9PX2xfVjBvaFdsRGZfNzZ0YWdTRkJOTWpwNU5Vby0ySXBSS24yOEZpMWM2b2lUNlJycXY4Q210Y2V3blN1Tm5TN1JXbVYtV3RiZkNSeFFUUU00QXFHQ2tEZ1pVZHFHUnV2R0xXdkF4Q3FQUlhOczdCU3g2WmRnZnlqcW4yMEdTdnU4cFZYTlBOOWxQeWZBcmtqY1lzTUdFLWRTMlZCRXE4NzlBcUl2eHJwNWdaRVBIS0RPRGliMGNHcnl3ZEtNM1lYWHJnQWdRUFl3TDJfRHZqUEJHLUt4WmQ0RmQxcG9pQkEzTDZYdUZuYkZaOXJaX2l3Qjk3cUh2cHVKdGo3d1Y4M0NSVDRUdnNXU1JoejdqWnlWcmNHeGRDV0dWcXFIRFBFVXV0UllCRUJES0Z4R2loN3o2T2dZTy1TWnM2THZsbW5SSVJhTjZBWlV6LTQtLUtjSlZXd1RvWkRCb3pYMUxfU2tXMUw4U0hQbU5UbENtX0JKdXVPWWJ4YndLYUM0dWVQclYzc21ndnkxU0hjUXdkZUM0TFo4dlRVSU5NMUJsbWp0N3FscEgyRE03cnZrT1Z1bjlKTjJhQi15VWt0MUpkSjRxcDhxc2tTVkJYX3RTam9Fb2VCUWw0blpSa1hyX2pqampXOHZQLUpWVThKQ2dQa2FkVUo1Z011WTZlWjhFeUNVTjc1Uy1WZVhWUS1seFdabDhIN0phelZldHhSR0VUT3ItSHFfZDgxNi1iMkxNZXJKdHh1aXc4M21ZNTNrQ2ZkQmtCYVFwTndkNTQzcUJkdEtXenVFOWRtNFRWSGJjdFVjRGlRYjVDSWVxUWxmNm8yS1ZzcXpvVFFRbWdRYWpzdklvODYtQ2lzc3BITzVobjN1M2ZDWkNKTE9DWWtPMzZfNmwtUzA4U2M0Q1JZM1F3VmdqcmMzT2FiaHYzSGRJaVI1Zml0S283MHJPUFJhdl9yVDkzUDRWSllCYWlfNS1VTURLN2ZOT29vaXhTck91VjU5eE43UmRYWkNwb3FzbmZ0Rnh6dUtkMkF1RDkzYjl0QUc5Z1RadjNwQUlvaHFDcGFEUXNKWlZFMEtCVXFBRnVTSzdZbUVoR3RpRzBab2hKdV96a3JOenFQVUlJamxYNXBQYlJ3QXBOWWlrcHBKd05nQ01FRElHX2ZCeDZnN1hHVlF4bmp2ck9yMUZHTXRJRkFSbm5zdTRNRTlSc1FxRGJDUDNlUDJfZFpBNTliWlBCak11WkIxNEVDR2ZuTXp1bGRSUWhDNjZpM0ZCSUZLd0VJMHdvX3FhVVZyX01sWFNTckJlTVY0cDdHemlvamF2S0llazVvaGRXT2t6WnI2LVlaUUF3Vy1QdUUzRU9kYmlWa3BQYXdEdjVTSnphQmVWSTdxcm1OaEdhTTh1aGFENEVzcmc2T2FnU3dtNks1V1hQQ0RvdUlfaW4zdE5pa0JZYzNoMG1ncC1HUDRBbzVEdzMtWDMxcDBJWTlXTGdmNWdqVlFraEdpSmlCRGx0U015TmlHLVBqOWlhYlVqdDVTc3pLVy1SV0UtZG1mTUh1bEhhODc2VXVXS1EzMlpyUXM2NmthcWMyU3JSMGlrZW1nWlFwX0tDTUg0YlJzRlQtV01CZm5RQldLajRtem4tTXdNSHhmMjBvWXFiOENac2F5SjczenBIbVkwWGxfSWZXQUhxZnBIMjM2WHFQdUNRQmE2eUFDTlcybFZVczZYQjEzZkplQjBUaHluc0NTQ284MFhIcWJHbHBXQmJ6UWxpT2IzMGtvRjA0X1VpUmlITlZBUlBmWnQ3UEpKQ2phN2lPRUQ4M1Y5dWhDSklpZFFWZjEyaEhlYll3UzZ4NEMyWUljUEFvanc3dVkyUG5nYlRId0FUVnd6LVFPdWM3TWtlZ1N6MzVDb0hoaERIRGk1YVBXc05xRTI3TGdrSUxmeDE1SDRqeVBvUExfWTNuQW1MSThqVzJ0eTBpZG5rWGhCaE5ORnZqTGRLMnF3NFB1RnZsZ25EOUp5UV9xaG1VX1pmdTBzeTBwdjlPNUxIUmZLa2J0T29URGhzVTNLdjJOTEh2YXRBTkI0cVB4T1hSM1RjQlpVb1NHeFA4S1JWOTBDanV4dE94eHM3TExSczlTYUJLZGtIRENsb1FLUmFvVkN6X3JLUlZxbEdOcURILUdrX1pHU2p3YTBORHA1MF9oVTlwOWR4UEItMG9jbHhBMG1ZMm8xdVpORUUzV2ZxU1g3aGprbEVCd3laWWtXMFJITG44Y3JEMkVGX2JDSHRkWFdBNFQ5S2xHT3gwU3VrWWY5WjJfYlR3VF9aUldYZHdjLW5iOGRjeU0zQ2hDLVQ4OGI0OGktbHdIWnE4NmJfRzJhZENQdTJQT3lIdGpwdHprai1IbVBKYThBbUg5S2s3UDBSRHRCMVUycW1HRW9fSVREajN4QmFOY3RfV1I4SWJHdHlzN2h4TW44eElHbjBQaFpuby1vak5EMGF4NDdXMGRDWVJNcFdrY0xDOG5iVkhldE1IT3Y0WlA1d3dKd0t5YXhaQ0Fmb2hRQnpVZ2xiNkxzczZZamlBeThJTkZBTkhXbW5TNTgwLS1OOE5VZV9rX0syWHpXbjBVSjJJa2QyODJPMUx3T29TMy0tQzQ3ejNwSnh0VlpfRmh1ZFdtejhveFRRdURZdVhhZFNkNlluUFc2WEg4dndORmpJUVkwYmVXV2EzTUJrZHZsQUFUREVkbV93N1A=)
        FCI_KEYSTORE_PASSWORD: Encrypted(Z0FBQUFBQmYweVpLS3I3c2NlZjlkM2VFZFJMQ1hvN1hSYTZvN21aUDd6aWNFNTFaN1BhMEtrVkFyZDYyN1M4NFNobjZZZ19TZERRbE81T0JwYWF5NnBNQms0ZWdNUXNucVE9PQ==)
        FCI_KEY_PASSWORD: Encrypted(Z0FBQUFBQmYweVpLRmNmVEgtUTR5UTh5VXlDY0xaMWtuWm5hb3U1OHFnMVJjQ0pNNzBsanBjeUFfWDhiMFlWU0ljek5Oak1KMkR1NEh0dGlfbGRWZkRNSnh5MFZhS2NxdHc9PQ==)
        FCI_KEY_ALIAS: Encrypted(Z0FBQUFBQmYweVpLMlVad1QtcmdEaGtMMjVYS2I1U3RHMG00NzdsUmwwM2tSSGZJaEl4c3BuVDJJYUZxbU1RR2drdG4yQ0lFWHBSUzkyMFp2RV9DVTJ3VWxIdXdrM21UU1E9PQ==)
        APP_STORE_CONNECT_ISSUER_ID: a3c260c0-e7e5-4f83-84f9-e00caa3b382f
        APP_STORE_CONNECT_KEY_IDENTIFIER: 298C628PBL
        APP_STORE_CONNECT_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYweVpLdExKTWJnR08wSk9nbEpLU0JOb2dla3lXS01DTUhrcEw1Q0VTdjI5NF9Wd0llN3czR01pbjk5REJkS3hUZjNFWDRGX2lBSDNIZllnVWNYb1RfS1JYNVRVSkhhTGRWdUx0c2Zkc0tJeW0wNTdQNFNTZlM3NnFBUlV6QTQwXzl5WUVjWnNYSVNZLXNJb3dhLUJWNGlrWDVWYTNDdEV2SloyU2RaVkNQaTZVazhUMl9vWEtFUDFSVEo0RzJjNmdyaFk5dHo5d0dqdmhnenAwM21OTlZ1ejZaZ2kyT3dVUGJOaGI2Z0F5Slg5YThYRTdQNFZfRmhzb3VLcWtzbHpMTlhSTlo0OTJuWXc1a3JqcjJnaGoyN3BWSGF2eHpPdEk4ZksyWDVJNThLRDVhYzZBQmpwc0Z6ekNzUHZUTU04ckoyZlFTQVpMazlNX3hSQ2p3bFJaZ281MDQxRXZFSjQwTUwyUkFfS2RnM0M1TzBUamtuZ3JldmJYcTBtNzRJRHNBYlFHX1c3UjhlcHM0dWRtSy1XdXZCMkhHd2NDYmM0YlR3MWstQXdPNjNuSmgyQT0=)
        CERTIFICATE_PRIVATE_KEY: Encrypted(Z0FBQUFBQmYweVpLYkU2dVphUEt5Mk05MkNhQ3dGVnlXOFRvdUZYX21Dbnhnemg2ZktyamUtOEc5UXoxMmd2ci1GU09ZNF9nWjVLQkJTeVpaeGVyMWVGNGE5bW5PZkhqTVlhMHlmc1pDc1dXTDNhdlMtUDZ0ZUlhTGJaR1dpcE5JVml4dnZxVEI0STlkXzV4ZF9oY094Q01CeExaMmNNOUJ1ZU5FZm1kUG5rVmlXcDh3ZFpMV2tZYm9aS1cxVzNDaEIyY28wa0JGV3M2MnhuYU9TdzF1WlZ1WUJmTXdyeTdhLWpBdF9yTUNqcVZnRkxQZFdtSnlDT3l0bUgwZWF5Z0U5Xy1JcmRyNTV4bnNva05ORHMtTzExa3duRWFKVTlPN09HZGF3LWxHb241WUhMZGNtQW9SOXVBRm4tQkFWc2ppMEtBZ3V3M29UbVprc0prS3NfcTlISWwtc05OWXBwQ29ha0MzRk4yWFY5dF9SUTBrZHFRTHU3aGJ2bGtCM2hpOTA1dTBRV3BzUl95V3RSU1o2Sm5zbmplZ0hTTEc4bHFadUlzX0NINTlSeXZFT2szeV82Ry1kLVg4SU1SZF9qZDFSekRNWDlWMThKVjRLcXZfLTBEYVZ0QjZWQXlGbzJNbHpNV0M4bDNNMEJrZUZQQm9PNndfUUwtYmNIRHI2VFpRQzhESjFXVlJ2TDBacnlubmJVZ3BhTDJydktRWG83VS1JT2lWSGIzU0JjVmtyNE13ZXRNRVRPRUVHcDRVcVRSa3JKZDZaa3Q5UHE1VzNtaGRJR1VrX0NYY3YzYTVab1FGcnE3RkxWenRhRE40Qmw2ZVJ1WVFEMTV3aF8wSVROaFVNT3VNN09pcEVPTkVyYS1fbm1LSnRRODB3OU9jR2FzZG1FSnJvLWg5X09YamE2QmxKNnlkcjdVcU40WDZFc2NmNUxrWWNac1dYQXVBZGFBMG9aNXlnVU1McWJBZFk4blZvWThGZ1VzZVBjUXRnWTIwaml3VnplZVpKRjd4bXQ5cW9adkFTUzMzOHBDUEZpcE5LSEVvSXNKTnlnZjJuSXJ4V2c1Y1otZkhEYWQwMnUzYzUtUjlGWl80S28xcGZsWjlnU1dfME9GczlSMUtvSDgxZV9aMWtUREVnUEtCbTlpaVlYVHZtU0o2R3o5cFFCN0QzWjkwWDZXNTJoT0NMaDRHUXk0aGlHdWpJRldmTklRdHlGRS1DVnJxdzFXS3g4Um5sN1FnY2t1VS1mZjBVZkl6RmNtajU0blluMF9QTFFzS0QtaXVramRiYWc5UC1NcS1sZUQwbmw2QjFxT0h4WkRQVVIyMkdXM1pLc1U2XzI3UEROZXB5cGpDNDNqcjRpaWhrV2dZY2JVZnloTlRrRnRrbTJDWjlkVUhTV1pVNG1qNGc3cWowR0ZIUzRSZFZUQ3R3ekRVMFJ3QldNamZnVmp0NGlfQndiR3FoakdzZEVfclFBX25XWGtsdGwwV2Y1WEpHNC1hVTJTTHJkdzBndF9ScC1yRGZuT0tNdUZSZHl5REVVOHZNVlFMamZQSzNGbXYwaVRFU0hEczNuUldnYmtzWWZUX0F5WF9HakxMUlBQQkJPYnFQZTFadmVsSjEyQ1BBbkhlLUxtT0ZBZ3pPN1lRektNaERvRUFKTDBfTGxvTGU1ZFpKdjlxOXhMdVFuYl80Q1pkd2tNRk5HSXQ5MExheFdxZXltTS1NXzNtYXZIbWtCRW9ZWXZHWExmbUx5TVEwSFdxTFJrMDRTRjdBWjdndkJyMHM4ajJPa0NZQTJuMi1wcDhpUXR4TXMwaGVuVm5NOWw2V1ZYSEU3ZERObElpRTlILU16SWRvZ1dGaHpfMFMwcTRIVTUtUnJNT0ZLeG9TT1NCM01JcHZqSjU0THE1WVBIb0Z0MkRSTjV6M0RndUgybjNIb1hvbGdhQ3pzYXE4Tk9YQlE0QTdGWWZVT2pwOVRCazZaUnNvclVnaERzMjluNmtUQWloRkczSzU2MF9FN2ZJbWYwalJCaGp0NnZDc1FTdW5QVnhDR3E1NldVZXlzby13QWlza3A5ZmJ5RlRIQUhENGlkTDdmVmFVWHU1RXlEZE1ULUNLal9Eb0dHQ1pEbjRuNzRnWV9fQ3VjZjNzRGpnQkNuR3BhdzJlTml2MVRtSTBhb1dybklTbG5lcndHY3RXMERWX2pTUTlyR292NmtRN3FKNmI0WWJwLUhoZDI3RE91VXhlcjVjdDN3ZkVzSlpMMnBZUjJMOWU1OXp4TGZDSDV3ZFVDTFdGX3lFVEI5VU5WVVZSdEF5VllEakpZVllUUlk0MTFXTlZPX1BLdWU5YXlFdE1YR2VKcmVZenVxM1ZOM1VNTUFLTFhuNUFtbjVycTRweWNoM3pobHJ5YXhCVWJJMEtGcVNCcVFLYWdIYzlZcUxnZDJSdHFvZVpMdU9XYnFFN0VLX0xGeHNnZTBMUkkwbVVyT3dzVkV1WEpjUzJKMV9GaEc4dEJDcnNBR01XaHgxX0duOTR3ZlhNT1N4Z1YyM1BuQkc5aDZkVnVwVmc0NkhJOXU0bUZ3RHU1N09SZF9WQV9rdzQ5WXNCbllZVXN1Y3I0YnZwcU1lblBUeGhFakxVVFFYdDlMZEZscFlIU3pqeDd6SlN0NFI3SXBkNlQxdURrSXVhUVBjYlFqTlZ2amxEVEs5ZW1vOFJFbDA2eUE1d0w1c3N1ai1QbGE0NUhUTUVPMWVmTXZxc19DUHJzRk1Zd25lTTFRU3ptMjR2R1BQd0VyWkNsNE0yOW9mMTFSUjNvYXhxS0U2Z19QNWlDbGJvZ0p0YlJkYXE3bXd6MUNxUVhvczRlOUhjWlN1djJtaFRBVmNKUlBjZ1RibWtiYWE3TkE4M3ctc1hRc0xDWlI5bW1XTmFhX2NjaGx1U1N0U1dmTlN2VHB1bE1NUHVPM0tpakkwOHZXblVUdDhxcUV3Q0s0eHhNMmNvLU9ld1FmTjRSU1Q5aFpqOUVFMjRYS0VTamFHdWtybS1SVDU4UDh2MzFFamRwM29jN2h4a1FOMWtpZ2ZHMU9EZWh6QlJsSk9BS0ZNUW9BZEJTdGx4Vlh3SGFl)
      flutter: v3.3.4
      xcode: latest
      cocoapods: default
    triggering:
      events:
        - push
        - tag
      branch_patterns:
        - pattern: 'master'
          include: true
          source: true
    scripts:
      - |
        # set up key.properties
        echo $FCI_KEYSTORE | base64 --decode > $FCI_KEYSTORE_PATH
        cat >> "$FCI_BUILD_DIR/android/key.properties" <<EOF
        storePassword=$FCI_KEYSTORE_PASSWORD
        keyPassword=$FCI_KEY_PASSWORD
        keyAlias=$FCI_KEY_ALIAS
        storeFile=/tmp/keystore.keystore
        EOF
      - |
        # set up local properties
        echo "flutter.sdk=$HOME/programs/flutter" > "$FCI_BUILD_DIR/android/local.properties"
      - cd . && flutter packages pub get
      - cd . && flutter pub global activate intl_utils
      - cd . && flutter pub global run intl_utils:generate
      - cd . && flutter analyze
      - cd . && flutter test
      - cd . && flutter build appbundle --build-number=$PROJECT_BUILD_NUMBER
      - find . -name "Podfile" -execdir pod install \;
      - keychain initialize
      - app-store-connect fetch-signing-files "$(xcode-project detect-bundle-id)"
        --type IOS_APP_STORE --create
      - keychain add-certificates
      - cd . && flutter build ios --release --no-codesign --build-number=$PROJECT_BUILD_NUMBER
      - xcode-project use-profiles
      - cd . && xcode-project build-ipa --workspace "ios/Runner.xcworkspace" --scheme
        "Runner"
    artifacts:
      - build/**/outputs/**/*.apk
      - build/**/outputs/**/*.aab
      - build/**/outputs/**/mapping.txt
      - build/ios/ipa/*.ipa
      - /tmp/xcodebuild_logs/*.log
      - flutter_drive.log
    publishing:
      email:
        recipients:
          - kristian@cavatina.no
        notify:
          success: false
          failure: true
      app_store_connect:
        api_key: $APP_STORE_CONNECT_PRIVATE_KEY
        key_id: 298C628PBL
        issuer_id: a3c260c0-e7e5-4f83-84f9-e00caa3b382f
        submit_to_app_store: true
      google_play:
        credentials: Encrypted(Z0FBQUFBQmdBMV9icjV4bGZ6eUgxUlkxdzM0dkdLdEVaWlZWb0VpR2I4UGdmQ1U4dXdkNzltTFFYSC1nMXBjTVRXbVlyYjlaRTVmNTlfQk40a0hPRmpmNnRxOVpTcTI3VHUwX1Q2akhHc1VNUkVtVHR4M1JFa1ZmR3QzaE82RlktR3NiaFZ3V1Y0Zmg5TUQzY0ItME1SU210OVpSeU1wV1NXek9icFZTSEhSTVlNUkZRVjJBQmVlM2t3bWhnMnNLYVJVbzMzMXBUc25oNG5GYnBIN0NRZVVuTTFFQVdhdV9vOTMzZV8tdjVwU3pFQXFiRTRDbjhicjhkZkJabmQzRU9vUHdOUkl1X2Z1blh3MEM2enpkRlJ2ZTFaNHg2b3hEVWNpc3l5cndNWnJudk5tYXZUdTdnOGZSakJfSS04djJ1cWNjR2ZCLWdZVmw4aWhsVnk5T1FDZ213VzdrdUUxdXppY1dSbGcxLU5SRGY1RVFuSFljbGcyUGVNb2RGeVE1WGh5dnV3QXFoZDh4c2V1OVdyMzdfVEV0cE00anpPZGEtaXp2Ui1faUlNdGtheURXbzRuaFREOUhVekZIdWFMUy1tOVZjZEMwdzlqcDdsUjJtNWdzVjBpRVYzQi1Qb05MWjFNRlM5djY2Q0lhOFlkSkJ6NnBCRFptbjNVeHdkRG12UE5JN3V6ZUctaHlrSkxzc05Dam1CMXdiMHl2a0doVW92UVpBMUMyWmhXMWxObG1fR19YUVhrN3hEajQ1ekxZT003c3QyaHJwWXhOWk1MN3VacFd3OXBsWE9QRnd2ZkNSUFdZYmxPRkwyZHRwc21POC1GeEpva0RBdGx4a2EwT0k3Z1RjSjZqeFVsTGpuQWpGRXpxd2tLVTNMZEV2eFhJRjNXU25NN2oxdElubGJidUxlXy1ST2l0Y3BRSTdBbE5VZGx2Z2JqSFlrT09kSUdlbkNQUHp2b1BBQjhNWDhvNlB3aGNEa1VsYkJpcWlhYjlxV0VGMVlock1NVHJDcDhkeHhUcnh2a3RzSGlHdjk0M3BGc0dVdkFMd0Uza1J0VzEySGZUVG10UE5NbjJBdFRnYXpNRXpabmROc0llNzY3THlXSFNaS1ZXVU43ZndrY3lRRjVCeDhYNWhwbU1NanRXNGRwQUVnOUM5VTlJaWhIMDdza2FpWFNBenljWVhFRS05dUtaazB0RFB6U2EwRUQtVUhtVWp0Q1p2TlpOakRFOE5Mb2lONHZQVUZiYTZXZ1Y4RDZDUE1ZaGpwSFhJS3JMbFF3NVBCcDJOaDJyMTNNMUF2YUVhSzRyWWt5R2p0aUYyYUd5S1JwZnhKYXVCNURvSkhTNXQyNFZ1S1hJNnU2am83T0tLRExzTjVxZ1RyN042TEtnSUV3Z2FwX1lIMUQtbjZaV3M5UHpOTFdmbzQ2Z2hDYzVNWTluczJZY0dlbFBwcUNsazlPYVRqREF5cERudGtPQkw0LTdpSk54UmhwYW1WLUIzZXJqVkxGQUVZMEZSQmRIV0lJWnFzNVEtbmFWRHFxMVlKbDhybl9VNWNkblpneDV0WEViZmdvb0VYUFNhQnhZMjNrbzhWLVNqeXlmV1g3ZDVoT09MSUdwTlpsbXl1a1U0Q21rNnQtc3UtLWFBVWplVzVyenktcmRHNGpCaVZ4VU51S0kybTk5RksyUnhtc3pOZ2lxcmZMSkVjTWhXLVZPazNLWGhqbFZPOFFrUEkzRUpRN01FRkV3a3BkelltS241amtEOVo0bzZxaEd6elppLUtWbUlFeURybmpOR1BFY0l0MjF1a1FFczNYQ3NzYjdXa3JvbDRtYjV4VEFQMmIyZTNqQUpaNDBVUVJ3WUczdWVNSlN1UUphTnJTQVJmQjFXNEdSNnVpb3dDck1YQXJNd2NTcDJQclZ1UHNKSDhoVTRJdFdDYmdVcWRQbE85OXFTelRDdHJmXzcxUVpBVE9jdnZaTE56STVvdW9zUHZyTW9OeGFPcG5hbXdQQkVNMVR3ZjhrYTlvU3VycjlfSHVVVW9iNHRKNDVDN3lWcTV0bVRQaFphbzdQeG5pcUtTcS1sRVBxMWs0UFFlX1FrLTZwTjN1dy1Fb0FBOGhrVmxCWHFFVnNVR240S3ZoMF9TWXJEQ1ZMZXZNUFFsdVc3R3k0X1JsbDRqQWhmeFczMm1NTGtYd1hET1FxR3NWa0JkZy1nUU1CTjEzOGZUYW9aR2JHTUNzdV9mM2I5OEJBYUx3dGZmTEFLWWdVb3luQmVRbnJsTDNCVEZCc2VVeC0zNWx6MV9ZTzkzcm9OeTRHSmdkUFlOaXVfTVJaOXZ1X3pRYnJ2WGRIRGtoUW55d3VxWjhtaHdCaU9WTFhxR3VieEstRm1RbU5jT0RsalEtWFlyc1QyQkpMdDJTZ0NPWnZ1OC1jNER2OFRac2JDcW5HemhyMW44QkN6UVdlRzF3czQ4MVdoLWdnZlVBSURKSGtKYU1PMlJGTnYzc0ZkVlZuOF9YNTRxUktWZG0tLTM0N0hnWUpLbGtwSl84RUkyMERkbG96NFlmMkl5X0RsbjRkY0lreUJHV1pPMlpXZ0x3ZXU3WVZoenB5ZWdEOUtPcHkydm5NWk51bkxiamNZazdYMklzdWFJc096T2Y2RldHY1E4YlBJZ0JQN2lMeldDLTZhN1JpZk1YdFRzQTBheU1vN0tRcjVqVTkwZWNpcV9iMGM1VGM0UWNULWxSR3dWa1lrdm84TFpkZ1JTeHBwa2tPaUJDaXZNdk1sN1dSWmJDLVlNRjJRcHRjYWZQUmYxSVF0aE1tei1qWGxqMGJNZTFUMzdGU0hhcTlKNlBIQ3h6RGJkUjd1aEtZT0tQOVhyR2pPNzFHTU9JaEhBbndxekJ4ZWx6TGJkeEEyQldoaUpYcFkzNGVSdkI3M2hwdGlNRzhzNUhEQm9FdEloYlByeTFJcm1xS0Nlcy1nMTcyNlhEcWZKc29tSlNESFdlNkROSFBBSEpOUjJGeTJUVDhHZnl5UWtUTGZaMC1wNXF2RElqbnZzWGVWcTNZaTNXZmRlYWNSNTdzSEQ2cVdaMmk1MHFGeExmNzdQczktZFNIY2lkR25IZmtXOFhVMlhXSXJkMWtHaDh5T3RaSjQzOTdDZDNCX1NuNlVZVlNjaC1DQlI1RXNVNGxoSzBMbzFKckMxcTJhWlJjd1JXWTJDVno2elZLaUhBa1R6N282MlR3S2lreWhseDJjbFJRVktzcjlYTFBqeUlELU5TeWMtZW9YQkNEUEdkVm44U1dfaG1rbVdKb0VrWHRGMURncjZubnRlaGd6Z2o2MGJwX0hwd3Uxa3lxYl9tQ0Q0WkRObXZoZnhmdk54YmpJbl9IWnNveEdGSU9lc1dldEo4R3ZrR1dHdWx3ek5RcF9qdm9XRnJHVWVfcGE2LWhKXzVHZDNNMjVjbjdyZ1lhMlp4Z21nMVZiem9zWDJPMHFBa0gwb0JKcVRSc1M0M2gxbS1ORUlvd1ZqZ2h5TDN0bXRwS215RXJNUjIxb3NwTFpSN05keHV5Q3I1RjdadVl2Y3k1aFkxSWFURFlCQndCRG55cGVjRkQ3MzFBdzFnY1F5Yy1uMTZydjZIek03TERELTFvSjZMRG5mUURHN2E1TnlrbnVFM2FZVzRJUlBFSzBfeUJLQThsbERKNHRYQnFwSTVTZWh6QVZCNXRvOVo3SmlzTHVnY09oclNwVzNIeEJkSndubjdhNmJPR0JZWWF3REFaZ1dYNFpvSXpvMzV0c3NON09SMlczR3NNUExiVmNOMHd5eElONXlVVC0wY1RqQkRyanZrMjdpSmc1RHgwYWpqVERFQjZWaXBtM2lESHEyUVdKeTZ4YVdnd3JHQzZ4RDY0ZUJSdEw0bGZwWEE3WGdLQ1hwbElmR0NWUHJyam9KQWpCb0cxekVuRDFJODRvcW5BWDNyUm9UT0NUanQ4aV9lWUl2dTdEZkhWLWxuUWxHN0FJU1RKcVh3SzJLTmRCZ19WWEZzM3hWMVM1eHNsbEhod29WQl9BM0FnY28xMzlkTGh1eUlIVkJuaE5XUDhkZUpjYU9IeGRJOXVTc2FRd0ctam92LWUyeEs5QWU1bndxaW5TeUsxaF9YdDc3T1VtNlc3M241bHBNeVVtR20tNFdLWUVjRUp2N2R1bkk2dGpYb09OV1otdTZOQ1k1ZzBPdktxS213dVVjWkdTVnl3dlNuME5SaV9Xbmdldk5WWGtWbkNobXRNb2VoSjMwd1NvcE5EdnRBRVkxcG1iVkVJVXBzbE1UQkNsQWh2VkxIanM3eFJwVFdKUnZ2TUR3PT0=)
        track: production
